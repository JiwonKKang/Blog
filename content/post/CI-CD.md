---
title: "무중단 배포는 어떻게할까?"
date: 2023-08-11T09:25:40+09:00
draft: false
pin: true
summary: "여러가지 배포의 종류를 알아보자"
tags: [devops]
---

## 무중단 배포의 종류

![배포 종류](/images/CI-CD/ci.png)

## 블루 - 그린 배포

DNS를 통해 원래의 서버에서 새로 배포할 서버로 IP를 바꿔버림 -> 순단현상이 나타날수있음(일시적으로 끊김)


## 롤링배포


서버하나에 배포하고 배포완료되면 재기동 -> 또 다른서버 배포하고 배포완료되면 재기동...반복
문제발생 - 서버를 재기동할떄 사용자경험이 안좋아짐

해결 - 로드밸런서에서 배포할 서버의 연결을 끊어놓고 배포하고 완료되고 재기동까지 완료하면 다시  재연결

## 점진적 배포

트래픽 매니저를 통해 새로 배포하는 서버로의 트래픽을 점진적으로 올림

---


~~~
서버는 stateless해야함 why? 오토 스케일링으로 서버가 늘어날때 어떤 서버로 들어와도 같은동작을 해야함

특정서버가 유저정보를 갖고있게되면 오토스케일링으로 서버가 늘어났을때 로드밸런스로 인해 다른서버로 들
어가게 되면 세션이 끊기게 된다.

sticky session - 로그인 세션 문제 해결 but auto scaling이 밸런스있게 안됨
